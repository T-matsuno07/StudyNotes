置換コマンド「sed」

# 参考ページ

https://atmarkit.itmedia.co.jp/ait/articles/1610/13/news015.html

# 基本構文

```bash
sed -r "s/変換前/変換後/g"
```

|オプション|役割|
|:--|:--|
|-r|拡張正規表現|
|-i|ファイルを上書き|
|-i".bk"|ファイルを上書き + バックアップ作成|

# 後方参照

```bash
sed -r "s/(置換前)/\1/g"
```

# ファイルの編集(ファイル内文字列の置換)

## ファイル編集 基本構文
```bash
sed -i -r "s/変換前/変換後/g"  対象ファイル
```


## ファイル編集時にバックアップ作成
```bash
sed -i".bk" -r "s/変換前/変換後/g"  対象ファイル
```
ファイルの編集を行う前の状態をファイル名の末尾に「.bk」と付けたファイル名で残す。

## バックアップファイルに番号付け
```bash
FileName="./AAA.txt"
BkNum=`ls -lu ${FileName}* | wc -l`
sed -i".$BkNum.bk" -r "s/変換前/変換後/g"  ${FileName}
```




## ファイルの冒頭に「#」を追記 or 削除
対象行の行頭に「#」を記載する
```bash
sed -i".org" -r "s/^(対象行の記載)/#\1/g"  対象ファイル
```

対象行の行頭に存在する「#」を削除する
```bash
sed -i".org" -r "s/^#(対象行の記載)/\1/g"  対象ファイル
```
